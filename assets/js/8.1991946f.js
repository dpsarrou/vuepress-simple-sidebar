(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{354:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"_3-use-jest-for-automated-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-use-jest-for-automated-tests"}},[e._v("#")]),e._v(" 3. Use Jest for automated tests")]),e._v(" "),s("p",[e._v("Date: 2020-06-01")]),e._v(" "),s("h2",{attrs:{id:"status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#status"}},[e._v("#")]),e._v(" Status")]),e._v(" "),s("p",[e._v("Accepted")]),e._v(" "),s("h2",{attrs:{id:"context"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[e._v("#")]),e._v(" Context")]),e._v(" "),s("p",[e._v("Automated testing is by now a standard in every quality software develpment process.\nThe benefits are many, productivity increase, time saving, better quality.\nSpecifically for this plugin, there are many checkpoints that have to be verified on\neach code change, including but not limited to:")]),e._v(" "),s("ul",[s("li",[e._v("Does the code work as its supposed to do after the change? Maybe the generated\npaths are not correct any more or even empty? Did we miss a trailing slash\nsomewhere?")]),e._v(" "),s("li",[e._v("Does the plugin even work with the given input of the Vuepress framework? Maybe\nwhen given a Page with no title, it breaks?")]),e._v(" "),s("li",[e._v("Does the plugin even work when included in Vuepress? Does Vuepress build process\nfinish successfully when the plugin is included?")])]),e._v(" "),s("p",[e._v("The above require a manual testing process, "),s("strong",[e._v("for each code change")]),e._v(".")]),e._v(" "),s("p",[e._v("From the many javascript testing frameworks, "),s("a",{attrs:{href:"https://jestjs.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Jest"),s("OutboundLink")],1),e._v(" is one\nof the most popular ones (for example its the default test framework to use with "),s("code",[e._v("React")]),e._v(")\nthat can automate the above tasks. It supports writing very simple tests, in\njavascript but also typescript through "),s("code",[e._v("ts-jest")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"decision"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#decision"}},[e._v("#")]),e._v(" Decision")]),e._v(" "),s("p",[e._v("We will use "),s("code",[e._v("Jest")]),e._v(" as the testing framework.")]),e._v(" "),s("h2",{attrs:{id:"consequences"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#consequences"}},[e._v("#")]),e._v(" Consequences")]),e._v(" "),s("ul",[s("li",[e._v("The developed codebase will be accompanied by automated tests")]),e._v(" "),s("li",[e._v("Before every commit or PR, the tests need to pass successfully")]),e._v(" "),s("li",[e._v("The code must be tested to the fullest extend: strive for 100% coverage as much\nas possible.")])]),e._v(" "),s("p",[e._v("Install "),s("code",[e._v("jest")]),e._v(", "),s("code",[e._v("ts-jest")]),e._v(" and its types with")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("npm install --save-dev jest ts-jest @types/jest\n")])])]),s("p",[e._v("Use the key "),s("code",[e._v("jest")]),e._v(" in "),s("a",{attrs:{href:"./../../../package.json"}},[e._v("package.json")]),e._v(" to configure the\nframework. Note that when typescript is used to write the tests, for the IDE\nautocomplete features to work, the test files path needs to be included in\nthe include paths of typescript in "),s("code",[e._v("tsconfig.json")]),e._v(". However this will have\nthe test folder and all its files be included in the production-ready\ncompiled files which is not what is usually needed. To acccount for this,\ncreate an additional "),s("code",[e._v("tsconfig.json")]),e._v(" file in the "),s("a",{attrs:{href:"./../../../../tests"}},[e._v("tests/")]),e._v("\nfolder which extends the main "),s("code",[e._v("tsconfig.json")]),e._v(" file but ignores the output of\nthat folder. See this "),s("a",{attrs:{href:"https://stackoverflow.com/questions/54139158/cannot-find-name-describe-do-you-need-to-install-type-definitions-for-a-test",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),s("OutboundLink")],1),e._v("\nfor more details.")]),e._v(" "),s("p",[e._v("Two types of test suites are identified as of now:")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("A unit test suite will verify that the classes of the plugin work as expected\nwhen given specific input, and provide the expected output. To run them use")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("npm run test:unit\n")])])])]),e._v(" "),s("li",[s("p",[e._v("An integration suite will verify that Vuepress build process completes\nsuccessfully when the plugin is used. To")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("npm run test:integration\n")])])])])]),e._v(" "),s("p",[e._v("To run all tests instead use")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("npm run test\n")])])]),s("p",[e._v("And to run all tests (or each test suite) in "),s("code",[e._v("watch")]),e._v(" for changes mode use the\n"),s("code",[e._v("--watch")]),e._v(" flag as for example")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("npm run test:unit -- --watch\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);